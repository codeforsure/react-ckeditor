(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(21),c=n.n(r),l=(n(71),n(9)),s=n(10),i=n(12),u=n(11),m=n(13),p=(n(32),n(28)),d=n(123),h=n(5),g=n(15),E=n.n(g);function f(e,t){return{type:"REGISTER_SUCCESS",isRegisterSuccess:e}}function S(e,t,n,a){return function(o){o(f(!1)),function(e,t,n,a){return new E.a(function(o,r){console.log("..."),fetch("http://localhost:8080/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:n,pass:a,email:t,fullName:e})}).then(function(e){return console.log("json converted"),console.log(e),e}).then(function(e){if(console.log("sucess"),console.log(e.status),200===e.status)return o(!0)}).catch(function(e){return console.log("error",e),r(new Error("Cannot Register Complaint"))})})}(e,t,n,a).then(function(e){o(f(!0))}).catch(function(e){o({type:"REGISTER_ERROR",registerError:e})})}}var b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={Name:"",Email:"",username:"",password:"",formErrors:{email:"",password:""},emailValid:!1,passwordValid:!1,formValid:!1},n.handleChange=function(e){console.log("name",e.target.name),console.log("value",e.target.value),n.setState(Object(p.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault(),console.log("submit",n.state.Name,n.state.Email,n.state.username,n.state.password),n.props.Register(n.state.Name,n.state.Email,n.state.username,n.state.password)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"Mainform",onSubmit:this.onSubmit},this.props.isRegisterSuccess&&o.a.createElement("div",null,o.a.createElement("p",null,"Successfully Registered")),o.a.createElement("form",null,o.a.createElement(O,{type:"text",name:"Name",placeholder:"Full Name",onChange:this.handleChange}),o.a.createElement(O,{type:"text",name:"Email",placeholder:"Email",onChange:this.handleChange}),o.a.createElement(O,{type:"text",name:"username",placeholder:"username",onChange:this.handleChange}),o.a.createElement(O,{type:"password",name:"password",placeholder:"password",onChange:this.handleChange}),o.a.createElement("button",{type:"submit"}," Create")),o.a.createElement("p",null,"Already a user?",o.a.createElement(d.a,{to:"/"},"Sign in"))))}}]),t}(o.a.Component);function O(e){return o.a.createElement("div",{className:"Input"},o.a.createElement("input",{type:e.type,name:e.name,onChange:e.onChange,placeholder:e.placeholder,required:!0,autoComplete:"false"}),o.a.createElement("label",{htmlFor:e.name}))}var C=Object(h.b)(function(e){return{isRegisterSuccess:e.isRegisterSuccess,loginError:e.loginError}},function(e){return{Register:function(t,n,a,o){return e(S(t,n,a,o))}}})(b),v=(n(42),n(2));var j=Object(h.b)(function(e){return{isLoginSuccess:e.isLoginSuccess,uname:e.name}},function(e){return{onclick:function(){Object(v.bake_cookie)("login",!1),Object(v.delete_cookie)("json_response"),e({type:"LOGOUT_SUCESS",isLogoutSuccess:!0})}}})(function(e){return Object(v.bake_cookie)("login",e.isLoginSuccess),Object(v.bake_cookie)("name",e.uname),console.log("name from user",e.uname),o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"topnav"},e.isLoginSuccess&&o.a.createElement(d.a,{to:"/welcome/home"},o.a.createElement("a",{onClick:!0},"Home")),e.isLoginSuccess&&o.a.createElement(d.a,{to:"/welcome/newcomplaint"},o.a.createElement("a",{onClick:!0},"New Complaint")),e.isLoginSuccess&&o.a.createElement(d.a,{to:"/welcome/allcomplaint"},o.a.createElement("a",{onClick:!0},"All Complaints")),o.a.createElement(d.a,{to:"/",style:{float:"right"}},o.a.createElement("a",{onClick:e.onclick},"Logout "))))}),y=n(128),_=n(124);var w=function(){return o.a.createElement("div",{className:"footer"},o.a.createElement("footer",null,o.a.createElement(y.a,null,o.a.createElement(_.a,{eventKey:2,title:"Item"},"Terms & Conditions"),o.a.createElement("div",{className:"text-center small copyright"},"\xa9 copyright 2019"))))},k=n(125),L=n(126),R=Object(h.b)(function(e,t){return{logged_in:e.isLoginSuccess,location:t.path,routeProps:{exact:t.exact,path:t.path}}},null,null,{pure:!1})(function(e){return o.a.createElement(k.a,Object.assign({},e.routeProps,{render:function(){return e.logged_in?o.a.createElement("div",null,e.children):o.a.createElement(L.a,{to:{pathname:"/",state:{from:e.location}}})}}))});var N=function(e){var t=Object(v.read_cookie)("name");return o.a.createElement("div",{style:{marginBottom:"485px"}},o.a.createElement("h1",{align:"center"},"Hi, ",t,"!!"),o.a.createElement("h1",{align:"center"},"this is home page"))},T=n(60),D=n.n(T),I="Bearer "+Object(v.read_cookie)("json_response");function U(e){return{type:"COMPLAINT_SUCCESS",isComplaintSuccess:e}}function P(e){return{type:"DELETE_SUCCESS",isDeleteSuccess:e}}function A(e){return{type:"UPDATE_SUCCESS",isUpdateSuccess:e}}function G(e){return function(t){t(U(!1)),function(e){return new E.a(function(t,n){console.log(e,"...",I),fetch("http://localhost:8080/complaint",{method:"post",headers:{Authorization:I,"Content-Type":"application/json"},body:JSON.stringify({complaint:e})}).then(function(e){return console.log("json converted"),console.log(e),e}).then(function(e){return console.log("sucess"),console.log(e.status),200===e.status?t(!0):401===e.status?n(new Error("401")):void 0}).catch(function(e){return console.log("error",e),n(new Error("Cannot Register Complaint"))})})}(e).then(function(e){t(U(!0))}).catch(function(e){t({type:"COMPLAINT_ERROR",complaintError:e})})}}function x(e){return function(t){t(P(!1)),function(e){return new E.a(function(t,n){fetch("http://localhost:8080/complaint/delete",{method:"post",headers:{Authorization:I,"Content-Type":"application/json"},body:JSON.stringify({complaint_id:e})}).then(function(e){return 200===e.status?t(!0):401===e.status?n(new Error("401")):void 0}).catch(function(e){return console.log("error",e),n(new Error("Cannot Delete Complaint"))})})}(e).then(function(e){t(P(!0))}).catch(function(e){t({type:"DELETE_ERROR",deleteError:e})})}}function M(e,t){return function(n){n(A(!1)),function(e,t){return new E.a(function(n,a){fetch("http://localhost:8080/complaint/update",{method:"post",headers:{Authorization:I,"Content-Type":"application/json"},body:JSON.stringify({complaint_id:e,complaint:t})}).then(function(e){return console.log("update response",e),200===e.status?n(!0):401===e.status?a(new Error("401")):void 0}).catch(function(e){return console.log("error",e),a(new Error("Cannot update Complaint"))})})}(e,t).then(function(e){n(A(!0))}).catch(function(e){n({type:"UPDATE_ERROR",updateError:e})})}}var J=n(65),V=n(61),z=n.n(V);n(37),n(118),n(119);var B=function(e){return o.a.createElement("div",{className:"b"},o.a.createElement("div",{className:"post"},o.a.createElement("h3",null,"COMPLAINT_ID:",e.Id),o.a.createElement("button",{id:e.Id,onClick:e.onDelete},"Delete"),o.a.createElement("button",{id:e.complaint,onClick:e.onView},"View/edit"),o.a.createElement("a",{style:{color:"red",padding:"10px",float:"right"}},"Pending"),o.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.complaint}})))},H=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).onclick=function(e){e.preventDefault(),console.log(e.target.id),n.props.deleteComplaint(e.target.id)},n.handleView=function(e){e.preventDefault();var t=n.state.complaints.filter(function(t){return t.complaint===e.target.id})[0].complaint_id;Object(v.bake_cookie)("complaint_id",t),localStorage.setItem("complaint",e.target.id),console.log("data from localStorage",localStorage.getItem("complaint")),n.setState({viewopen:!0})},n.state={complaints:[],isLoaded:!1,viewopen:!1,error:!1},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="Bearer "+Object(v.read_cookie)("json_response");console.log("precheck bearer",t),fetch("http://localhost:8080/complaint/add",{method:"GET",headers:{Authorization:t,"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){console.log("response complaint",t),401===t.status&&e.setState({error:!0}),e.setState({isLoaded:!0,complaints:t}),console.log(e.state)}).catch(function(t){console.log(t),e.setState({error:!0})})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.isLoaded,t.complaints),a=Object(J.a)(this.state.complaints);return o.a.createElement(z.a,{horizontal:!1},o.a.createElement("div",{className:"allcomplaints"},this.state.viewopen&&o.a.createElement(L.a,{to:"/welcome/newcomplaint"}),this.state.error&&this.props.logout(),this.state.error&&o.a.createElement(L.a,{to:"/error"}),this.props.isDeleteSuccess&&o.a.createElement("div",null,o.a.createElement("h1",null,"Complaint Deleted"),window.location.reload()),n.length?o.a.createElement("div",null,a.sort(function(e,t){return e.complaint_id<t.complaint_id?1:-1}).map(function(t){return o.a.createElement(B,{Id:t.complaint_id,complaint:t.complaint,onDelete:e.onclick,onView:e.handleView})})):o.a.createElement("h1",{align:"center"},"No complaints Registered")))}}]),t}(o.a.Component),F=Object(h.b)(function(e){return{accessToken:e.accessToken,isDeleteSuccess:e.isDeleteSuccess}},function(e){return{deleteComplaint:function(t){return e(x(t))},logout:function(){Object(v.bake_cookie)("login",!1),Object(v.delete_cookie)("json_response"),e({type:"LOGOUT_SUCESS",isLogoutSuccess:!0})}}})(H),q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={content:localStorage.getItem("complaint"),update:!1},n.onChange=function(e){console.log("onChange: ",e.editor.getData());var t=e.editor.getData();n.setState({content:t})},n.onSubmit=function(e){if(e.preventDefault(),console.log(n.state.content,"from content"),n.state.update){var t=Object(v.read_cookie)("complaint_id");console.log(t),n.props.updateComplaint(t,n.state.content)}else n.props.Complaints(n.state.content)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){""!==localStorage.getItem("complaint")&&(console.log("update staus changed"),this.setState({update:!0})),console.log("complaint changed"),localStorage.setItem("complaint","")}},{key:"render",value:function(){var e=this.props,t=e.isComplaintSuccess,n=e.complaintError,a=e.isUpdateSuccess,r=e.updateError;return o.a.createElement("div",{align:"center",onSubmit:this.onSubmit},o.a.createElement("form",null,t&&o.a.createElement("div",null,o.a.createElement("h1",null,"Successfully Registered the complaint"),o.a.createElement(L.a,{to:"/welcome/newcomplaint"})),a&&o.a.createElement("div",null,o.a.createElement("h1",null,"Complaint Successfully updated")),n&&this.props.logout()&&o.a.createElement("div",null,o.a.createElement(L.a,{to:"/error"})),r&&this.props.logout()&&o.a.createElement("div",null,o.a.createElement(L.a,{to:"/error"})),o.a.createElement("h1",{align:"center"},"Drop Your Complaints Here"),o.a.createElement(D.a,{activeClass:"p10",content:this.state.content,events:{change:this.onChange},config:{height:"370px",width:"90%",uiColor:"#AADC6E",fullPage:!0,toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"links"},"/",{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"}]}}),o.a.createElement("button",{className:"but1",type:"submit"},this.state.update?o.a.createElement("div",null,"Update Complaint"):o.a.createElement("div",null,"Submit Complaint"))),this.state.update&&o.a.createElement(d.a,{to:"/welcome/allcomplaint"},o.a.createElement("a",null,"All Complaints")))}}]),t}(o.a.Component),K=Object(h.b)(function(e){return{isComplaintSuccess:e.isComplaintSuccess,complaintError:e.complaintError,isUpdateSuccess:e.isUpdateSuccess,updateError:e.updateError}},function(e){return{Complaints:function(t){e(G(t))},updateComplaint:function(t,n){e(M(t,n))},logout:function(){Object(v.bake_cookie)("login",!1),Object(v.delete_cookie)("json_response"),e({type:"LOGOUT_SUCESS",isLogoutSuccess:!0})}}})(q);var W=function(e){return o.a.createElement("div",null,o.a.createElement("div",{id:"myHeader"},o.a.createElement(j,null)),o.a.createElement("div",{className:"row"},o.a.createElement(R,{path:"/welcome/home"},o.a.createElement(N,null)),o.a.createElement(R,{path:"/welcome/newcomplaint"},o.a.createElement(K,null)),o.a.createElement(R,{path:"/welcome/allcomplaint"},o.a.createElement(F,null))),o.a.createElement("div",null,o.a.createElement(w,null)))};function Y(e,t){return function(n){n({type:"LOGIN_PENDING",isLoginPending:!0}),function(e,t){return new E.a(function(n,a){fetch("http://localhost:8080/login",{method:"POST",headers:{Authorization:"Bearer","Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then(function(e){return console.log("server response:",e),200===e.status?e.json():a(new Error("Invalid username and password"))}).then(function(t){console.log("respone json",t),Object(v.bake_cookie)("json_response",t.accessToken);var a=Object(v.read_cookie)("json_response"),o="Bearer "+a;fetch("http://localhost:8080/name",{method:"POST",headers:{Authorization:o,"Content-Type":"application/json"},body:JSON.stringify({username:e})}).then(function(e){return n(!0)})}).catch(function(e){})})}(e,t).then(function(t){n(function(e,t){return console.log("namein action",t),{type:"LOGIN_SUCCESS",isLoginSuccess:e,name:t}}(!0,e))}).catch(function(e){n({type:"LOGIN_ERROR",loginError:e})})}}var Q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={name:"",password:""},n.onChangeName=function(e){console.log(e.target.value),n.setState({name:e.target.value})},n.onChangepass=function(e){n.setState({password:e.target.value})},n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.name,o=t.password;console.log(a+"..submit.."+o),n.props.login(a,o)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoginPending,n=e.isLoginSuccess,a=e.loginError;return console.log(n),o.a.createElement("div",{className:"main"},o.a.createElement("h1",{align:"center"},"Welcome!! Login here"),o.a.createElement("div",{className:"Mainform",onSubmit:this.onSubmit},t&&o.a.createElement("div",null,"Please wait...."),a&&o.a.createElement("div",null,o.a.createElement("p",null,a.message)),!0===n&&o.a.createElement("div",null,o.a.createElement(L.a,{to:"/welcome/home"})),o.a.createElement("form",null,o.a.createElement(X,{type:"text",name:"name",placeholder:"username",onChange:this.onChangeName,value:this.state.name}),o.a.createElement(X,{type:"password",name:"password",placeholder:"password",onChange:this.onChangepass,value:this.state.password}),o.a.createElement("button",{type:"submit"}," Sign In")),o.a.createElement("p",null,o.a.createElement(d.a,{to:"/register"},"Create Account"))))}}]),t}(o.a.Component),X=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"Input"},o.a.createElement("input",{type:this.props.type,name:this.props.name,placeholder:this.props.placeholder,onChange:this.props.onChange,required:!0,autoComplete:"false"}),o.a.createElement("label",{htmlFor:this.props.name}))}}]),t}(o.a.Component),Z=Object(h.b)(function(e){return{isLoginPending:e.isLoginPending,isLoginSuccess:e.isLoginSuccess,loginError:e.loginError}},function(e){return{login:function(t,n){return e(Y(t,n))}}})(Q);var $=function(){return o.a.createElement(Z,null)},ee=n(127);var te=function(e){return o.a.createElement("div",{className:"main"},o.a.createElement("h1",null,"Session Expired"),o.a.createElement(d.a,{to:"/"},"Login here"))},ne=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(ee.a,null,o.a.createElement("div",null,o.a.createElement(k.a,{path:"/",component:$,exact:!0}),o.a.createElement(k.a,{path:"/register",component:C}),o.a.createElement(k.a,{path:"/error",component:te}),o.a.createElement(k.a,{path:"/sample",component:B}),o.a.createElement(R,{path:"/welcome"},o.a.createElement(W,null))))}}]),t}(a.Component),ae=n(18),oe=n(62),re=n(63),ce=n.n(re),le=n(7),se={isLoginPending:!1,isLoginSuccess:!1,loginError:null,isLogoutSuccess:!1,isRegisterSuccess:!1,registerError:null,isComplaintSuccess:!1,complaintError:null,isDeleteSuccess:!1,isUpdateSuccess:!1,deleteError:null,name:"",accessToken:""};var ie=n(64),ue=[Object(ae.applyMiddleware)(oe.a,ce.a),Object(ie.devToolsEnhancer)({})],me=Object(ae.createStore)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(e.isLoginSuccess=Object(v.read_cookie)("login"),e.name=Object(v.read_cookie)("name"),e.accessToken=Object(v.read_cookie)("json_response"),console.log("response",Object(v.read_cookie)("json_response")),console.log("cookie",e.isLoginSuccess),t.type){case"LOGIN_SUCCESS":return Object(le.a)({},se,{isLoginSuccess:t.isLoginSuccess,name:t.name});case"LOGIN_PENDING":return Object(le.a)({},e,{isLoginPending:t.isLoginPending});case"LOGIN_ERROR":return Object(le.a)({},e,{loginError:t.loginError,isLoginPending:!1});case"REGISTER_SUCCESS":return Object(le.a)({},e,{isRegisterSuccess:t.isRegisterSuccess});case"REGISTER_ERROR":return Object(le.a)({},e,{registerError:t.registerError});case"COMPLAINT_SUCCESS":return Object(le.a)({},e,{isComplaintSuccess:t.isComplaintSuccess});case"COMPLAINT_ERROR":return Object(le.a)({},e,{complaintError:t.complaintError});case"DELETE_SUCCESS":return Object(le.a)({},e,{isDeleteSuccess:t.isDeleteSuccess});case"UPDATE_SUCCESS":return Object(le.a)({},e,{isUpdateSuccess:t.isUpdateSuccess});case"DELETE_ERROR":return Object(le.a)({},e,{deleteError:t.deleteError});case"LOGOUT_SUCESS":return Object(v.delete_cookie)("json_response"),Object(v.delete_cookie)("name"),Object(v.delete_cookie)("login"),Object(v.delete_cookie)("json response"),Object(le.a)({},se,{isLogoutSuccess:t.isLogoutSuccess});default:return e}},void 0,ae.compose.apply(void 0,ue));c.a.render(o.a.createElement(h.a,{store:me},o.a.createElement(ne,null)),document.getElementById("root"))},32:function(e,t,n){},42:function(e,t,n){},66:function(e,t,n){e.exports=n(121)},71:function(e,t,n){}},[[66,2,1]]]);
//# sourceMappingURL=main.36be7bc4.chunk.js.map